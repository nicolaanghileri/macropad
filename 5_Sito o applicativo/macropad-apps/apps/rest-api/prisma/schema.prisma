generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
}

model User {
  id         Int             @id @default(autoincrement())
  email      String?         @db.VarChar(319)
  password   String?         @db.VarChar(64)
  api_keys   Api_keys[]
  user_macro MacrosOnUsers[]

  @@map("user")
}

model Macro {
  id         Int             @id @default(autoincrement())
  nome       String?         @db.VarChar(25)
  createdAt  DateTime?       @db.Timestamp(0)
  version    Int?            @db.TinyInt
  app_id     Int?
  app        App?            @relation(fields: [app_id], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "macro_ibfk_1")
  user_macro MacrosOnUsers[]

  @@index([app_id], map: "app_id")
  @@map("macro")
}

model MacrosOnUsers {
  user_id  Int
  macro_id Int
  user     User  @relation(fields: [user_id], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "user_macro_ibfk_1")
  macro    Macro @relation(fields: [macro_id], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "user_macro_ibfk_2")

  @@id([user_id, macro_id])
  @@index([macro_id], map: "macro_id")
  @@map("user_macro")
}

model App {
  id    Int     @id @default(autoincrement())
  name  String? @db.VarChar(25)
  exe   String? @db.VarChar(45)
  macro Macro[]

  @@map("app")
}

model Device {
  id        Int       @id @default(autoincrement())
  name      String?   @db.VarChar(25)
  status_id Int?
  api_keys  Api_keys?
  status    Status?   @relation(fields: [status_id], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "device_ibfk_1")

  @@index([status_id], map: "status_id")
  @@map("device")
}

model Status {
  id     Int      @id @default(autoincrement())
  value  String?  @db.VarChar(25)
  device Device[]

  @@map("status")
}

model Api_keys {
  id        Int       @id @default(autoincrement())
  api_key   String?   @db.VarChar(128)
  createdAt DateTime? @db.Timestamp(0)
  user_id   Int?
  device_id Int?      @unique(map: "device_id")
  user      User?     @relation(fields: [user_id], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "api_keys_ibfk_1")
  device    Device?   @relation(fields: [device_id], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "api_keys_ibfk_2")

  @@index([user_id], map: "user_id")
  @@map("api_keys")
}
